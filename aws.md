# AWS 클라우드 기초강좌

## 클라우드 컴퓨팅이랑?
클라우드 컴퓨팅은 IT 리소스를 인터넷을 통해 온디맨드로 제공하고 사용한 만큼만 비용을 지불하는것을 말합니다.
* 온디맨드:수용에 반응함

테이터센터 : 어플리케이션의 서버를 호스팅하는 실제 시설
  - 컴퓨팅 시스템을 위한 하드웨어
  - 네트워킹 장비
  - 전원공급장치
  - 전기 시스템
  - 백업 발전기
  - 환경 제어장치(에어커느 냉각장치, 팬 등)
  - 운영 인력
  - 기타 인프라


클라우드의 종류

클라우드 컴퓨팅 모델 
* 어플리케이션의 구성 : 어플리케이션 / OS+Runtime / Computing / Storage / Network

1. IaaS: Inftastructure as a Service
  인프라만 제공
  OS를 직접 설치하고 필요한 소프트웨어를 개발해서 사용 (Computing / Storage / Network)
  가상의 컴퓨터를 하나 임대하는 것과 비슷함
  예) AXS EC2
  
2. PaaS: Platform as a Service
  인프라 + OS + 기타 프로그램 실행에 필요한 부분(런타임)
  바로 코드만 올려서 돌릴수 있도록 구성
  
3. SaaS: Software as a Service
  인프라 + OS +  필요한 소프트웨어가 제공됨
  서비스 자체를 제공
  다른 세팅없이 서비스만 이용
  예) Gmail, 
  
  
클라우드 컴퓨팅 배포 모델

1. 공개형(클라우드)
  - 모든 부분이 클라우드에서 실행
  - 낮은 비용
  - 높은 확장성

2. 폐쇄형
  - 높은 수준의 커스터마이징 가능
  - 초기 비용이 비쌈
  - 유지보수 비용이 비쌈
  - 높은 보안
  
3. 혼합형(하이브리드)
  - 폐쇄형과 공개형의 혼합
  - 폐쇄형에서 공개형으로 전환하는 과도기에 사용
  - 혹은 폐쇄형의 백업으로 사용



3강.

IAM, Amazon CloudFront 리전안에 있지 않음
----------------------리전
VPC, S3
----------------------가용영역
RDS EC2

리전: AWS의 서비스가 제공되는 서버의 물리적 위치
  각 리전에는 고유의 코드가 부여됨 예) 서울리전은 ap-northeast-2 / 미국동부(버니지아 북부)리전은 us-east-1 (제일 먼저 서비스가 출시됨)
  리전별로 가능한 서비스가 다름

  리전을 선택할 떄 고려할점
    - 지연속도
    - 법률(데이터, 서비스 제공 관련)
    - 사용가능한 AWS 서비스
    

가용영역: 리전의 하부단위 ( 하나의 리전은 반드시 2개 이상의 가용영역으로 구성)
  하나 이상의 데이터 센터로 구성
  리전간의 연결은 매우 빠른 정요 네트워크로 연결
  반드시 물리적으로 일정 거리(몇 KM 이상) 떨어져 있음 -> 여러 재해에 대한 대비
  가용영역 코드 AZ-A 가 항상 같은 데이터센터를 가리키지 않음
  

엣지 로케이션: AWS의 CloudFront(CDN)등의 여러 서비스들을 가장 빠른 속도로 제공(캐싱)하기 위한 거점
  전 세계에 여러장소에 흩어져있음
  내가 요청했던 데이터를 일정기간 보관

글로벌 서비스 VS 리전 서비스
  AWS에는 서비스가 제공되는 지역의 기반에 따라 글로벌 서비스와 리전 서비스로 분류
  - 글로벌 서비스 : 데이터 및 서비스를 전 세계의 모든 인프라가 공유
    - CloudFront
    - IAM
    - Route53
    - WAF
   
  - 지역 서비스: 특정 리전을 기반으로 데이터 및 서비스를 제공
    - 대부분의 서비스
    - S3 : 전세계에서 동일하게 사용할수 있으나 데이터 자체에는 리전에 종속 :  리전서비스


ARN(Amazon Resource Name) : AWS의 모든 리소스의 고유 아이디
  형식 : arn:[partition]:[service]:[region]:[account_id]:[resource_type]/resource_name/(qualifier)
        arn:aws:s3:::test_bucket/text.txt
        arn:aws:dynamodb:ap-northeast-2:123456789012:table/mytable
        arn:aws:dynamodb:ap-northeast-2:123456789012:table/*
      * 맨끝에 와일드카드(*)를 사용하여 다수의 리소스를 지정 가능
      

4강.

AWS계정
 - 루트유저
      생성한 계정의 모든 권한을 자동으로 가지고 있음
      생성시 만든 이메일 주소로 로그인
      탈취당했을때 복구가 매우 힘들 : 사용을 자제하고 MFA(일회용 비밀번호?) 설정 필요
      루트유저는 관리용으로만 이용: 계정 설정 변경, 빌링 등
      AWS API 호출 불가(AccessKey/Secret AccessKey 부여 불가)
      
  - IAM 유저
      IAM(Identity and Access Management)을 통해 생성한 유저
      만들때 주어진 아이디로 로그인
      기본권한 없음 : 따로 권한을 부여해야함 예) 관리자가 IAM User, 개발자 IAM User, 디자이너 IAM User, 회계팀 IAM User
       -> 권한을 분리 시킬수 있어 관리에 용이
      꼭 사람이 아닌 어플리케이션 등의 가상의 주체를 대표할 수도 이음
      AWS API 호출 가능
        - AccessKey : 아이디 개념
        - Secret Access Key : 패스워드 개념
      AWS의 관리를 제외한 모든 작업은 관리용 IAM User를 만들어 사용
      권한 부여시 루트유저와 같이 모든 권한을 가질수 있지만 빌링 관련 권한은 루트유저가 허용해야함


* MFA(Multi Factor Authentication) : MFA(다단계 인증)는 로그인 프로세스에 보호 계층을 추가합니다. 계정이나 앱에 액세스할 때 사용자가 지문 스캔, 전화로 받은 코드 입력 등과 같은 추가 ID 확인을 제공합니다.

[실습]
aws 계정만들기
1. aws 홈페이지에서 계정생성
2. 구글OTP 어플리케이션 다운로드 받아서 MFA 설정
3. IAM 대시보드 오른쪽 AWS 계정 생성 - 별칭 설정(기존에 존재하는 별칭은 중복불가) -> url 생성 https://aws-hani.signin.aws.amazon.com/console 으로 로그인 가능
4. 사용자추가 -권한설정(기존 정책 직접연결-AdministratorAccess(모든 권한 단,빌링(과금)은 root가 볼수 있도록 해야 볼수 있음)


###IAM
  IAM(AWS Identity and Access Management)를 사용하면 AWS 서비스와 리소스에 대한 액세스를 안전하게 관리할수 있습니다. 또한, AWS 사용자 및 그룹을 만들고 관리하며 AWS리소스에 대한 액세스를 허용 및 거부할 수 있습니다.
  - AWS 어카운트 관리 및 리소스/사용자/서비스의 권한 제어
    - 서비스 사용을 위한 인증 정보 부여
  - 사용자의 생성 및 관리 및 계정의 보안
    - 사용자의 패스워드 정책 관리(일정시간마다 패스워드 변경 )
  - 다른 계정과의 리소스 공유
    - Identity Federation(facebook 로그인, 구글 로그인 등)
  - 계정에 별명 부여 가능 -> 로그인 주소 생성 가능
  - IAM은 글로벌 서비스 (Region별 서비스가 아님)
  
  구성:
  1. 사용자 :  실제 AWS를 사용하는 사람 홋은 어플리케이션을 의미
  2. 그룹 : 사용자의 집합
            그룹에 속한 사용자는 그룹에 부여된 권한을 행사
  3. 정책(Policy) : 사용자와 그룹, 역할이 무억을 할 수 있는지에 관한 문서
                    JSON(JavaScript Object Notation) 형식으로 정의
  4. 역할(Role) : AWS 리소스에 부여하여 AWS 리소스가 무엇을 할수 있는지를 정의
                혹은 다른 사용자가 역할을 부여 받아 사용
                다른 자격에 대해서 신뢰관계를 구축 가능
                역할을 바꾸어 가면 서비스를 사용가능
  
  정책 -> 사용자
      -> 그룹
      -> 역할
  Lambda -> 역할
  
  사용자의 종류
   1.루트사용자 : 결제 관리를 포함한 계정의 모든 권한을 가지고 있음
      -관리 목적 이외의 다른 용도로 사용하지 않는 것을 권장
      - 탈취 되었을 떄 복구가 매우 어려움 -> MFA를 설정하는 것을 권장
      - MFA(Muti-factor authentication): 일회용 패스워드를 생성하여 로그인
      
   2.IAM 사용자 : IAM을 통해 생성해서 사용하는 사용자
      - 한 사람 혹은 하나의 어플리케이션을 의미
      - 설정 시 콘솔 로그인 권한 부여 가능
      - 설정 시 AWS 서비스를 이용할 수 있음
          - Access Key(유저이름)
          - Secret Access Key(패스워드)
      - AdminAccess를 부여하더라도 루트 사용자로 별도의 설정을 하지 않으면 Billing 기능을 사용할 수 없음
      ![image](https://user-images.githubusercontent.com/66357708/152720847-a1736c2c-a88e-4d31-acf9-d7ec085b4996.png)
      
      [활성화 하는법]
      1. 루트사용자로 로그인
      2. 오른쪽상단 계정 -> 계정
      3. 결제 정보에 대한 IAM 사용자 및 역할 액세스 -> 편집 -> IAM액세스 활성화 check 업데이트

  
  IAM 자격 증명 보고서 : IAM의 현재 상황을 볼수 있는것
   - 계정의 모든 사용자와 암호, 엑세스 키, MFA 장치등의 증명 상태를 나열하는 보고서를 생성하고 다운로드 가능
   - 4시간에 한번씩 생성 가능
   - AWS 콘솔, CLI, API에서 생성 요청 및 다운로드 가능
   - 포함되는 정보
   ![image](https://user-images.githubusercontent.com/66357708/152721702-7520922b-7b56-442b-8495-4125f710c5d8.png)
   
   
  IAM 모범 사용 사례
    - 루트 사용자는 사용하지 않기
    - 불필요한 사용자는 만들지 않기
    - 가능하면 그룹과 정책을 사용하기
    - 최소한의 권한만을 허용하는 습관을 들이기(Principle of least privilege)
    - MFA를 활성화하기
    - AccessKey 대신 역할을 활용하기
    - IAM 자격 증명 보고서(Credential Report) 활용하기
  
  ##6강. 가상화
  
  가상화란? 단일 컴퓨터의 하드웨어 요소를 일반적으로 가상머신(VM)이라고 하는 다수의 가상 컴퓨터로 분할할 수 있도록 해주는 기술
  
  운영체제(Operating System, OS):  시스템 하드웨어 자원과 소프트웨어 자원을 운영 관리하는 프로그램
    - Windows, Linux, MaxOS, Android..
  
  특권 명령(privileged instruction): 시스템 요소들과 소통할수 있는 명령(특정한 프로그램이 시스템요소 메모리나 마더보드..등등과 송통할수 있는 명령) - OS만 가능
    - OS는 특권명령때문에 하나의 하드웨어 시스템당 하나밖에 돌아갈수 없음
    - 일반 프로그램은 특권 명령이 필요없기 때문에 많은 프로그램을 동시에 수행 가능
  
  가상화가 나타나기 전까지는 하나의 하드웨어 시스템은 하나의 OS만 실행이 가능했음
    - 즉 일반적인 컴퓨터처럼 직접 OS가 하드웨어에 설치된 상태(Bare-Metal)로만 운영 가능했었음
   
  1세대 : 완전 가상화(Fully Emulated)
    - 모든 시스템 요소가 에뮬레이터 안에서 돌아감
    - 즉 CPU, 하드디스크, 마더보드 등 모든 요소를 에뮬레이터로 구현하여 OS와 연동
    - 엄청나게 느림
    
    *
  
  










